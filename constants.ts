
import { StandardFormula } from './types';

// 1. Alias Database (Resolves user input to standard names)
export const HERB_ALIASES: Record<string, string> = {
  // === 常见通用别名 (Expanded) ===
  '薏米': '薏苡仁',
  '苡米': '薏苡仁',
  '生薏仁': '薏苡仁',
  '熟薏仁': '薏苡仁',
  '薏仁': '薏苡仁',
  
  '元胡': '延胡索',
  '玄胡': '延胡索',
  
  '山肉': '山茱萸',
  '枣皮': '山茱萸',
  '山萸肉': '山茱萸',
  '萸肉': '山茱萸',
  
  '锦纹': '大黄',
  '将军': '大黄',
  '川军': '大黄',
  
  '淮山': '山药',
  '怀山药': '山药',
  '淮山药': '山药',
  
  '仙灵脾': '淫羊藿',
  
  '栝楼': '瓜蒌',
  '全瓜蒌': '瓜蒌',
  '瓜楼': '瓜蒌',
  
  '花粉': '天花粉',
  
  '国老': '甘草',
  '炙草': '甘草',
  '生草': '甘草',
  '炙甘草': '甘草',
  '黄婆': '甘草',
  
  '大腹皮': '大腹皮', 
  '槟榔': '槟榔',
  '花槟榔': '槟榔',
  '大腹子': '槟榔',
  
  '焦三仙': '神曲,山楂,麦芽',
  
  '大力子': '牛蒡子',
  '鼠粘子': '牛蒡子',
  '恶实': '牛蒡子',
  
  '坤草': '益母草',
  '茺蔚子': '茺蔚子',
  
  '忍冬花': '金银花',
  '双花': '金银花',
  '二花': '金银花',
  '银花': '金银花',
  
  '公英': '蒲公英',
  '黄花地丁': '蒲公英',
  
  '大芸': '肉苁蓉',
  '肉松蓉': '肉苁蓉',
  
  '破故纸': '补骨脂',
  
  '骨碎补': '骨碎补',
  '申姜': '骨碎补',
  '猴姜': '骨碎补',
  
  '草决明': '决明子',
  
  '川贝': '川贝母',
  '浙贝': '浙贝母',
  '大贝': '浙贝母',
  '象贝': '浙贝母',
  
  '苦桔梗': '桔梗',
  
  '紫苏叶': '紫苏',
  '苏叶': '紫苏',
  '紫苏梗': '苏梗',
  
  '怀牛膝': '牛膝',
  '川牛膝': '牛膝',
  
  '川断': '续断',
  
  '山查': '山楂',
  '红果': '山楂',
  
  '建曲': '神曲',
  '六神曲': '神曲',
  
  '砂仁': '砂仁',
  '春砂仁': '砂仁',
  '壳砂': '砂仁',
  
  '香附': '香附',
  '香附子': '香附',
  
  '木香': '木香',
  '云木香': '木香',
  '广木香': '木香',
  
  '苍术': '苍术',
  '茅苍术': '苍术',
  
  '川芎': '川芎',
  '芎劳': '川芎',

  // === 附子家族 ===
  '黑顺片': '附子',
  '白附片': '附子',
  '淡附片': '附子',
  '熟附子': '附子',
  '制附子': '附子',
  '附片': '附子',
  '草乌叶': '草乌',

  // === 人参/参类 ===
  '红参': '人参',
  '生晒参': '人参',
  '吉林参': '人参',
  '野山参': '人参',
  '高丽参': '人参',
  '党参': '党参',
  '潞党参': '党参',

  // === 半夏 ===
  '法半夏': '半夏',
  '姜半夏': '半夏',
  '清半夏': '半夏',
  '法夏': '半夏',
  '姜夏': '半夏',
  '仙半夏': '半夏',

  // === 陈皮/橘皮 ===
  '广陈皮': '陈皮',
  '广皮': '陈皮',
  '橘皮': '陈皮',
  '新会皮': '陈皮',
  '青皮': '青皮',

  // === 茯苓 ===
  '云茯苓': '茯苓',
  '云苓': '茯苓',
  '茯苓块': '茯苓',
  '白茯苓': '茯苓',
  '赤茯苓': '茯苓',
  '茯神': '茯神',

  // === 白术/苍术 ===
  '炒白术': '白术',
  '焦白术': '白术',
  '土炒白术': '白术',
  '生白术': '白术',
  '炒苍术': '苍术',
  '二术': '苍术,白术',

  // === 芍药 ===
  '杭白芍': '白芍',
  '炒白芍': '白芍',
  '酒白芍': '白芍',
  '赤芍药': '赤芍',
  '炒赤芍': '赤芍',

  // === 地黄 ===
  '熟地': '熟地黄',
  '熟地炭': '熟地黄',
  '生地': '生地黄',
  '鲜生地': '生地黄',
  '干地黄': '生地黄',
  
  // === 丹皮 ===
  '丹皮': '牡丹皮',
  '粉丹皮': '牡丹皮',

  // === 麦冬/天冬 ===
  '麦门冬': '麦冬',
  '寸冬': '麦冬',
  '天门冬': '天冬',

  // === 黄连/黄芩/黄柏 ===
  '川连': '黄连',
  '雅连': '黄连',
  '酒黄连': '黄连',
  '姜黄连': '黄连',
  '萸黄连': '黄连',
  '条芩': '黄芩',
  '枯芩': '黄芩',
  '子芩': '黄芩',
  '酒黄芩': '黄芩',
  '川柏': '黄柏',
  '盐黄柏': '黄柏',

  // === 枳实/枳壳/厚朴 ===
  '川朴': '厚朴',
  '姜朴': '厚朴',
  '厚朴花': '厚朴',
  '炒枳实': '枳实',
  '炒枳壳': '枳壳',
  '江枳壳': '枳壳',

  // === 龙牡 ===
  '龙骨': '龙骨',
  '生龙骨': '龙骨',
  '煅龙骨': '龙骨',
  '牡蛎': '牡蛎',
  '生牡蛎': '牡蛎',
  '煅牡蛎': '牡蛎',
  '生龙牡': '龙骨,牡蛎',
  
  // === 荆防 ===
  '荆芥': '荆芥',
  '荆芥穗': '荆芥',
  '防风': '防风',
  '荆防': '荆芥,防风',

  // === 其他 ===
  '枣仁': '酸枣仁',
  '炒枣仁': '酸枣仁',
  '杜仲': '杜仲',
  '炒麦芽': '麦芽',
  '焦麦芽': '麦芽',
  '制香附': '香附',
  '醋香附': '香附',
};

// 2. Herb Knowledge Base for Tooltips
export const HERB_INFO: Record<string, { effect: string; paozhi: string }> = {
    '麻黄': { effect: '发汗解表，宣肺平喘，利水消肿。', paozhi: '【生用】发汗力强；【蜜炙】偏于润肺止咳，适于表证已解之喘咳；【麻黄绒】作用缓和，适于老幼体弱者。' },
    '桂枝': { effect: '发汗解肌，温通经脉，助阳化气。', paozhi: '【生用】发散风寒；【蜜炙】温中补虚；【炒黄】温经通络。' },
    '甘草': { effect: '补脾益气，清热解毒，祛痰止咳，缓急止痛。', paozhi: '【生用】泻火解毒，润肺止咳；【蜜炙】补中益气，缓急止痛，药性由凉转温。' },
    '杏仁': { effect: '止咳平喘，润肠通便。', paozhi: '【燀杏仁】去皮尖，减毒且利于煎出；【炒杏仁】温肺散寒。' },
    '芍药': { effect: '养血调经，敛阴止汗，柔肝止痛。', paozhi: '【生白芍】养血敛阴，平肝阳；【炒白芍】性缓，善柔肝健脾；【酒白芍】行血止痛；【土炒】入脾，和中缓急。' },
    '大枣': { effect: '补中益气，养血安神。', paozhi: '擘开入药，利于成分溶出；【黑枣】滋补肝肾。' },
    '生姜': { effect: '解表散寒，温中止呕，化痰止咳。', paozhi: '【生姜】发散；【煨姜】和中止呕，散性减弱；【姜炭】温经止血；【干姜】回阳通脉。' },
    '半夏': { effect: '燥湿化痰，降逆止呕，消痞散结。', paozhi: '【生半夏】有毒，多外用；【法半夏】偏燥湿，治痰多；【姜半夏】偏止呕，治胃寒呕吐；【清半夏】偏化痰，治风痰。' },
    '陈皮': { effect: '理气健脾，燥湿化痰。', paozhi: '【生陈皮】燥湿化痰力强；【土炒】温补脾胃，止泻；【醋制】疏肝理气；【橘红】专主化痰；【橘络】通络化痰。' },
    '厚朴': { effect: '燥湿消痰，下气除满。', paozhi: '【生厚朴】峻烈，刺激咽喉；【姜制】消除刺激性，增强宽中和胃、降逆止呕功效。' },
    '大黄': { effect: '泻下攻积，清热泻火，凉血解毒。', paozhi: '【生大黄】泻下力猛，用于积滞便秘；【酒大黄】借酒力上行，善清上焦血热；【熟大黄】泻下力缓，减轻腹痛；【大黄炭】凉血止血。' },
    '枳实': { effect: '破气消积，化痰散痞。', paozhi: '【生枳实】力猛破气；【麸炒】缓和烈性，健脾消食。' },
    '柴胡': { effect: '疏散退热，疏肝解郁，升举阳气。', paozhi: '【生用】解表退热；【醋炙】疏肝止痛，入肝经血分；【鳖血炒】治骨蒸劳热。' },
    '黄芩': { effect: '清热燥湿，泻火解毒，止血，安胎。', paozhi: '【生用】清热泻火；【酒炒】上行清肺热，治上焦火；【炒炭】清热止血，治崩漏下血。' },
    '人参': { effect: '大补元气，复脉固脱，补脾益肺。', paozhi: '【生晒参】性平，补气生津；【红参】性温，温补力强，回阳救逆；【糖参】力缓，适于虚不受补者。' },
    '当归': { effect: '补血活血，调经止痛，润肠通便。', paozhi: '【全当归】补血活血；【归头】止血；【归身】补血；【归尾】破血；【酒炙】增强活血通经；【土炒】补血不滑肠。' },
    '熟地黄': { effect: '补血滋阴，益精填髓。', paozhi: '九蒸九晒，性温味甘，专于补益；【砂仁拌】防滋腻碍胃；【熟地炭】补血止血。' },
    '白术': { effect: '健脾益气，燥湿利水，止汗，安胎。', paozhi: '【生白术】燥湿利水，治水肿风湿；【炒白术】健脾止泻，补气安胎；【焦白术】消食健脾。' },
    '茯苓': { effect: '利水渗湿，健脾，宁心。', paozhi: '【茯苓块】利水渗湿；【赤茯苓】偏于泻热；【茯神】偏于宁心安神。' },
};

// 3. Classic Formulas Database
export const CLASSIC_FORMULAS: StandardFormula[] = [
    {
        id: 'mah-huang-tang',
        name: '麻黄汤',
        source: '伤寒论',
        composition: ['麻黄', '桂枝', '杏仁', '甘草'],
        standardDosage: { '麻黄': 9, '桂枝': 6, '杏仁': 6, '甘草': 3 },
        usage: '上四味，以水九升，先煮麻黄，减二升，去上沫，内诸药，煮取二升半，去滓，温服八合。',
        effect: '发汗解表，宣肺平喘。',
        indications: '外感风寒表实证。恶寒发热，头身疼痛，无汗而喘，舌苔薄白，脉浮紧。',
        analysis: '本方为辛温发汗之峻剂。君药麻黄，开腠理，宣肺气；臣药桂枝，解肌發表，温通经脉；佐药杏仁，降利肺气；使药甘草，调和诸药。'
    },
    {
        id: 'gui-zhi-tang',
        name: '桂枝汤',
        source: '伤寒论',
        composition: ['桂枝', '芍药', '生姜', '大枣', '甘草'],
        standardDosage: { '桂枝': 9, '芍药': 9, '生姜': 9, '大枣': 3, '甘草': 6 }, // 大枣 3枚 approx
        usage: '上五味，以水七升，微火煮取三升，去滓，适寒温，服一升。服已须臾，啜热稀粥一升余，以助药力。',
        effect: '解肌发表，调和营卫。',
        indications: '外感风寒表虚证。头痛发热，汗出恶风，鼻鸣干呕，苔白不渴，脉浮缓。',
        analysis: '本方为辛温解肌之剂。桂枝解肌发表，芍药益阴敛汗，姜枣助正气，甘草调和。体现了"散收配伍"的特点。'
    },
    {
        id: 'xiao-qing-long-tang',
        name: '小青龙汤',
        source: '伤寒论',
        composition: ['麻黄', '芍药', '细辛', '干姜', '甘草', '桂枝', '五味子', '半夏'],
        standardDosage: { '麻黄': 9, '芍药': 9, '细辛': 3, '干姜': 3, '甘草': 6, '桂枝': 9, '五味子': 3, '半夏': 9 },
        usage: '上八味，以水一斗，先煮麻黄，减二升，去上沫，内诸药，煮取三升，去滓，温服一升。',
        effect: '解表散寒，温肺化饮。',
        indications: '外感风寒，内停水饮证。恶寒发热，无汗，咳喘，痰多而稀，或痰饮咳喘，不得平卧，或身体疼重，头面四肢浮肿，舌苔白滑，脉浮。',
        analysis: '外有表寒，内有水饮。麻黄、桂枝发汗解表；细辛、干姜、半夏温肺化饮；芍药、五味子敛肺止咳，防耗散太过；甘草调和。'
    },
    {
        id: 'si-jun-zi-tang',
        name: '四君子汤',
        source: '局方',
        composition: ['人参', '白术', '茯苓', '甘草'],
        standardDosage: { '人参': 9, '白术': 9, '茯苓': 9, '甘草': 6 },
        usage: '上为细末。每服二钱，水一盏，生姜三片，大枣二枚，煎至七分，去滓，不拘时服。',
        effect: '益气健脾。',
        indications: '脾胃气虚证。面色萎白，语声低微，气短乏力，食少便溏，舌淡苔白，脉虚弱。',
        analysis: '补气基础方。人参大补元气；白术健脾燥湿；茯苓渗湿健脾；甘草调中。'
    },
    {
        id: 'si-wu-tang',
        name: '四物汤',
        source: '局方',
        composition: ['熟地黄', '当归', '芍药', '川芎'],
        standardDosage: { '熟地黄': 12, '当归': 9, '芍药': 9, '川芎': 6 },
        usage: '上俼咀。每服三钱，水一盏半，煎至八分，去滓，空心食前服。',
        effect: '补血调血。',
        indications: '营血虚滞证。心悸失眠，头晕目眩，面色无华，妇人月经不调，量少或经闭不行，脐腹作痛，舌淡，脉细弦或细涩。',
        analysis: '补血调血之基础方。熟地滋阴补血；当归补血活血；白芍养血柔肝；川芎活血行气。'
    },
    {
        id: 'liu-wei-di-huang-wan',
        name: '六味地黄丸',
        source: '小儿药证',
        composition: ['熟地黄', '山茱萸', '山药', '泽泻', '牡丹皮', '茯苓'],
        standardDosage: { '熟地黄': 24, '山茱萸': 12, '山药': 12, '泽泻': 9, '牡丹皮': 9, '茯苓': 9 },
        usage: '上为末，炼蜜为丸，如梧桐子大。空心淡盐汤下三丸。',
        effect: '滋补肝肾。',
        indications: '肝肾阴虚证。腰膝酸软，头晕目眩，耳鸣耳聋，盗汗遗精，消渴，骨蒸潮热，手足心热，口燥咽干，牙齿动摇，足跟作痛，小便淋沥，舌红少苔，脉沉细数。',
        analysis: '三补三泻。熟地、山茱萸、山药滋补肝脾肾之阴；泽泻、丹皮、茯苓泻肾浊、清肝火、渗脾湿。'
    },
    {
        id: 'xiao-chai-hu-tang',
        name: '小柴胡汤',
        source: '伤寒论',
        composition: ['柴胡', '黄芩', '人参', '半夏', '甘草', '生姜', '大枣'],
        standardDosage: { '柴胡': 24, '黄芩': 9, '人参': 9, '半夏': 9, '甘草': 9, '生姜': 9, '大枣': 4 },
        usage: '上七味，以水一斗二升，煮取六升，去滓，再煎取三升，温服一升，日三服。',
        effect: '和解少阳。',
        indications: '少阳证。往来寒热，胸胁苦满，默默不欲饮食，心烦喜呕，口苦，咽干，目眩，舌苔薄白，脉弦。',
        analysis: '和解剂主方。柴胡透表泄热，疏肝解郁；黄芩清泻少阳之热；人参、甘草、大枣益气扶正；半夏、生姜和胃降逆。'
    },
    {
        id: 'bai-hu-tang',
        name: '白虎汤',
        source: '伤寒论',
        composition: ['石膏', '知母', '甘草', '粳米'],
        standardDosage: { '石膏': 30, '知母': 9, '甘草': 3, '粳米': 15 },
        usage: '上四味，以水一斗，煮米熟汤成，去滓，温服一升，日三服。',
        effect: '清热生津。',
        indications: '气分热盛证。壮热面赤，烦渴引饮，汗出恶热，脉洪大有力。',
        analysis: '清气热之主方。石膏清肺胃之火；知母清热润燥；粳米、甘草益胃生津，防寒凉伤胃。'
    }
];
